(function(){var G=this,B,I=/\s+/,J=/([A-Z])/g,C=/^[^<]*(<(.|\s)+>)[^>]*$/,H=/z-?index|font-?weight|opacity|zoom|line-?height/i,A=document.createElement("div"),F=Array.prototype,E=HTMLElement.prototype;var D=function(K,L){if(this instanceof D&&!this.inited){return this.init(K,L)}else{return new D(K,L)}};G.simpli5=D;if(!("$" in G)){G.$=D}D.fn=D.prototype={constructor:D,concat:function(K){return new D(F.concat.apply(this,arguments),this.context)},every:F.every,filter:function(K,L){return new D(F.filter.call(this,K,L),this.context)},forEach:F.forEach,indexOf:F.indexOf,join:F.join,lastIndexOf:F.lastIndexOf,map:function(K,L){return new D(F.map.call(this,K,L),this.context)},pop:F.pop,push:F.push,reduce:F.reduce,reduceRight:F.reduceRight,reverse:F.reverse,shift:F.shift,slice:function(L,K){return new D(F.slice.call(this,L,K),this.context)},some:F.some,sort:F.sort,splice:function(M,L,K){return new D(F.splice.apply(this,arguments),this.context)},unshift:F.unshift,init:function(K,M){var L;this.context=M||document;this.inited=true;if(!K){return }else{if(K.nodeType){this.push(K);this.context=K}else{if(typeof K==="string"){this.merge(this.context.querySelectorAll(K))}else{if(typeof K=="function"){return D.onReady(K)}else{this.merge(K)}}}}},extend:function(M){var L=this;if(arguments.length==2){L=arguments[0];M=arguments[1]}for(var K in M){L[K]=M[K]}},merge:function(K){if(!(K instanceof Array)&&"length" in K){K=D.toArray(K)}if(K instanceof Array){this.push.apply(this,K)}else{this.push(K)}},find:function(K){var L=new D();this.forEach(function(M){L.merge(M.querySelectorAll(K))})},toString:function(){return"simpli5: ["+this.join(",")+"]"}};D.extend=D.prototype.extend;D.node=Node.prototype;D.node.extend=D.extend;D.element=E;D.element.extend=D.extend;D.extend({onReady:function(K){document.on("DOMContentLoaded",K)},forEach:function(L,K){F.forEach.call(L,K)},toArray:function(L){if(L instanceof Array){return L}var K=F.slice.call(L);if(!K.length&&L!=null&&!("length" in L)){return[L]}return K},fragment:function(M){if(M instanceof Node){return M}var N=document.createDocumentFragment();if(typeof M=="string"){A.innerHTML=M;while(A.firstChild){N.appendChild(A.firstChild)}}else{if(M instanceof Array||M instanceof NodeList){for(var L=0,K=M.length;L<K;L++){N.appendChild(M[L])}}}return N},html:function(K){return this.fragment(K).firstChild},map:function(K){var Q=D.map,O=D.fn,M=D.element,P=D.node;for(var L in K){var N=K[L];D.fn[L]=Q[N](M[L]||P[L])}}});D.extend(D.map,{some:function(K){return function(){var L=arguments;return this.some(function(M){return K.apply(M,L)})}},every:function(K){return function(){var L=arguments;return this.every(function(M){return K.apply(M,L)})}},forEach:function(K){return function(){var L=arguments;this.forEach(function(M){K.apply(M,L)});return this}},merge:function(K){return function(){var L=arguments;var M=new D();this.forEach(function(N){M.merge(K.apply(N,L))});return M}},getterSetter:function(K){return function(){var L=arguments;if(L.length==1){return this.length?K.call(this[0],L[0]):B}this.forEach(function(M){K.apply(M,L)});return this}},returnFirst:function(K){return function(){return K.apply(this[0],arguments)}}});D.node.extend({parent:function(K){var L=this.parentNode;while(L){if(L.matches(K)){return L}L=L.parentNode}}});HTMLDocument.prototype.findFirst=HTMLDocument.prototype.querySelector;D.element.extend({find:function(K){return new D(K,this)},findFirst:E.querySelector,matches:(E.webkitMatchesSelector||E.mozMatchesSelector),addClass:function(L){var K=this.className.split(I);if(K.indexOf(L)==-1){K.push(L);this.className=K.join(" ")}return this},removeClass:function(M){var L=this.className.split(I);var K=L.indexOf(M);if(K!=-1){L.splice(K,1)}if(L.length==0){this.removeAttr("class")}else{this.className=L.join(" ")}return this},hasClass:function(K){return this.className.split(I).indexOf(K)!=-1},toggleClass:function(K){if(this.hasClass(K)){this.removeClass(K)}else{this.addClass(K)}return this},attr:function(K,M){if(typeof K=="object"){for(var L in K){this.setAttribute([L],K[L])}}else{if(M!==B){this.setAttribute(K,M);return this}else{return this.getAttribute(K)}}},css:function(L,N){if(typeof L=="object"){for(var M in L){this.css(M,L[M])}}else{if(N!==B){if(typeof N=="number"&&!H.test(L)){N+="px"}this.style[L]=N;return this}else{N=this.style[L];if(!N){L=L.replace(J,"-$1").toLowerCase();var K=G.getComputedStyle(this,null);N=K.getPropertyValue(L)}return N}}},removeAttr:function(K){this.removeAttribute(K);return this},make:function(L){this.__proto__=L.prototype||L.__proto__;var K=D.toArray(arguments);K.shift();if("init" in this){this.init.apply(this,K)}return this},html:function(L){if(L===B){return this.innerHTML}else{if(typeof L=="string"){this.innerHTML=L}else{var K=this;this.innerHTML="";L=D.toArray(L);D.forEach(L,function(M){K.append(M)})}}return this},text:function(K){if(K===B){return this.innerText}else{this.innerText=K}return this},cleanWhitespace:function(){var L=this.firstChild;while(L){var K=L;L=L.nextSibling;if(K.nodeType==3){this.removeChild(K)}}},val:function(P){if(P===B){if(this.nodeName=="SELECT"&&this.type=="select-multiple"){var N=this.selectedIndex,L=[],M=this.options;if(N==-1){return L}for(var K=M.length;N<K;N++){var O=M[N];if(O.selected){L.push(O.value)}}return L}return(this.value||"").replace(/\r/g,"")}if(typeof P==="number"){P+=""}if(P instanceof Array&&this.type=="radio"||this.type=="checkbox"){this.checked=P.indexOf(this.value)!=-1}else{if(this.nodeName=="SELECT"){if(P){var L=P instanceof Array?P:[P],M=this.options;for(var N=0,K=M.length;N<K;N++){var O=M[N];if(L.indexOf(O.value)!=-1){O.selected=true}}}else{this.selectedIndex=-1}}else{this.value=P}}},after:function(L){var M=D.fragment(L);var K=D.toArray(M.childeNodes);this.parentNode.insertBefore(M,this.nextSibling);return K},append:function(L){var M=D.fragment(L);var K=D.toArray(M.childeNodes);this.appendChild(M);return K},before:function(L){var M=D.fragment(L);var K=D.toArray(M.childeNodes);this.parentNode.insertBefore(M,this);return K},prepend:function(L){var M=D.fragment(L);var K=D.toArray(M.childeNodes);this.insertBefore(M,this.firstChild);return K},data:function(K,L){if(L===B){if("_data" in this){return this._data[K]}}else{if(!("_data" in this)){this._data={}}return this._data[K]}},outerWidth:function(L){if(L===B){return this.offsetWidth}else{var M=parseInt(this.css("paddingLeft"))+parseInt(this.css("paddingRight"));var K=parseInt(this.css("borderLeftWidth"))+parseInt(this.css("borderRightWidth"));this.css("width",Math.max(L-M-K,0))}},outerHeight:function(L){if(L===B){return this.offsetHeight}else{var M=parseInt(this.css("paddingTop"))+parseInt(this.css("paddingBottom"));var K=parseInt(this.css("borderTopWidth"))+parseInt(this.css("borderBottomWidth"));this.css("height",Math.max(L-M-K,0))}},width:function(L){if(L===B){var M=parseInt(this.css("paddingLeft"))+parseInt(this.css("paddingRight"));var K=parseInt(this.css("borderLeftWidth"))+parseInt(this.css("borderRightWidth"));return this.offsetWidth-M-K}else{this.css("width",Math.max(L,0))}},height:function(L){if(L===B){var M=parseInt(this.css("paddingTop"))+parseInt(this.css("paddingBottom"));var K=parseInt(this.css("borderTopWidth"))+parseInt(this.css("borderBottomWidth"));return this.offsetHeight-M-K}else{this.css("height",Math.max(L,0))}},rect:function(N){if(N===B){var L=this.getBoundingClientRect();return{left:L.left,top:L.top,width:L.width,height:L.height}}else{var L=this.getBoundingClientRect();var M=this.offsetLeft-L.left;var K=this.offsetTop-L.top;if("left" in N){this.css("left",N.left+M)}if("top" in N){this.css("top",N.top+K)}if("width" in N){this.outerWidth(N.width)}if("height" in N){this.outerHeight(N.height)}}}});D.map({matches:"every",addClass:"forEach",removeClass:"forEach",hasClass:"some",toggleClass:"forEach",attr:"getterSetter",removeAttr:"forEach",css:"getterSetter",make:"forEach",html:"getterSetter",text:"getterSetter",val:"getterSetter",cleanWhitespace:"forEach",after:"merge",append:"merge",before:"merge",prepend:"merge",data:"getterSetter",width:"getterSetter",height:"getterSetter",outerWidth:"getterSetter",outerHeight:"getterSetter",rect:"getterSetter"})})();Function.prototype.bind=function(D){var E=this,B=[];for(var C=1,A=arguments.length;C<A;C++){B.push(arguments[C])}return function(){var G=[];for(var H=0,F=arguments.length;H<F;H++){G.push(arguments[H])}G=G.concat(B);return E.apply(D,G)}};Function.prototype.start=function(A){if(this.timer){return }this.timer=setInterval(this,A*1000);this();return this.timer};Function.prototype.stop=function(){clearInterval(this.timer);delete this.timer};Function.prototype.running=function(){return !!this.timer};Function.prototype.throttle=function(A,B){var D=this;var C=function(){if(C.throttled){C.pending=true;return C.throttled}C.throttled=setTimeout(function(){delete C.throttled;if(C.pending){delete C.pending;C.call(A,B)}},A);return D.apply(B,arguments)};return C};function Class(B,E){E=E||function(){if(this.init){return this.init.apply(this,arguments)}};if(B){if(B.extend){Class.subclass.prototype=B.extend.prototype;E.prototype=new Class.subclass();delete B.extend}if(B.implement){var C=B.implement instanceof Array?B.implement:[B.implement];for(var D=0,A=C.length;D<A;D++){Class.implement(E,C)}delete B.implement}Class.mixin(E,B)}E.prototype.constructor=E;E.prototype.callSuper=Class.callSuper;return E}simpli5.extend(Class,{subclass:function(){},callSuper:function(F){var E=this.__curProto__||this.__proto__;var D=E.__proto__;while(D&&!D.hasOwnProperty(F)){D=D.__proto__}if(!D){throw'There is no super method "'+F+'" for '+this}this.__curProto__=D;var B=simpli5.toArray(arguments).slice(1);var C=D.__lookupSetter__(F)||D[F];var A=C.apply(this,B);this.__curProto__=E;return A},implement:function(B,A){Class.mixin(B,A.prototype,true)},mixin:function(E,B,C){for(var D in B){if(!C&&!B.hasOwnProperty(D)){continue}var A=B.__lookupGetter__(D),F=B.__lookupSetter__(D);if(A||F){if(A){E.prototype.__defineGetter__(D,A)}if(F){E.prototype.__defineSetter__(D,F)}}else{E.prototype[D]=B[D]}}},make:function(A,C,D){A.__proto__=C.prototype;var B=simpli5.toArray(arguments);B.splice(0,2);if(!D&&"init" in A){A.init.apply(A,B)}}});var CustomEvent=new Class({extend:Event,init:function(D,C,B){var A=document.createEvent("Events");A.initEvent(D,C||false,B||false);Class.make(A,this.constructor,true);return A}});var CustomMouseEvent=new Class({extend:MouseEvent,init:function(O,H,E,J,K,G,F,D,B,C,A,N,M,I,L){var P=document.createEvent("MouseEvents");P.initEvent(O,H||false,E||false,J,K,G,F,D,B,C,A,N,M,I,L);Class.make(P,this.constructor,true);return P}});var DataEvent=new Class({extend:Event,init:function(B,C){var A=document.createEvent("Events");A.initEvent(B,false,false);Class.make(A,this.constructor,true);A.data=C;return A}});var PropertyChangeEvent=new Class({extend:Event,init:function(C,B,D){var A=document.createEvent("Events");A.initEvent(C,false,false);Class.make(A,this.constructor,true);A.oldValue=B;A.newValue=D;return A}});var EventDispatcher=new Class({bind:function(D){if(!(D instanceof Array)){D=simpli5.toArray(arguments)}for(var C=0,A=D.length;C<A;C++){var B=D[C];this[B]=this[B].bind(this)}},addEventListener:function(B,C){if(typeof C!="function"){throw"Listener must be a function"}if(!this.events){this.events={}}var A=this.events[B];if(!A){this.events[B]=A=[]}else{if(A.indexOf(C)!=-1){return }}A.push(C)},removeEventListener:function(C,D){if(!this.events){return }var B=this.events[C];if(!B){return }var A=B.indexOf(D);if(A!=-1){B.splice(A,1)}},dispatchEvent:function(D){if(!this.events){return }var C=this.events[D.type];if(!C){return }for(var B=0,A=C.length;B<A;B++){C[B].call(this,D)}}});simpli5.extend(EventDispatcher.prototype,{on:function(E,F,B){var D=E.split(/\s*,\s*/);F.bound=F.bind(this);F=F.bound;for(var C=0,A=D.length;C<A;C++){this.addEventListener(D[C],F,B)}},un:function(E,F,B){var D=E.split(/\s*,\s*/);F=F.bound||F;for(var C=0,A=D.length;C<A;C++){this.removeEventListener(D[C],F,B)}}});simpli5.node.extend({on:EventDispatcher.prototype.on,un:EventDispatcher.prototype.un});simpli5.map({on:"forEach",un:"forEach"});var PropertyChange={observe:function(G,F,B){var E=F.split(/\s*,\s*/);var D=G.__observers__;if(!D){G.__observers__=D={}}for(var C=0,A=E.length;C<A;C++){F=E[C];if(!this.isObservable(G,F)){this.makeObservable(G,F)}var H=D[F];if(!H){D[F]=H=[]}if(H.indexOf(B)==-1){H.push(B)}}},unobserve:function(B,I,G){var H=I.split(/\s*,\s*/);var F=B.__observers__;if(!F){return }for(var C=0,A=H.length;C<A;C++){I=H[C];var D=F[I];if(!D){continue}var E=D.indexOf(G);D.splice(E,1)}},dispatch:function(G,E,B,F){if(B===F){return }var D=G.__observers__;if(!D){return }var H=D[E];if(!H){return }for(var C=0,A=H.length;C<A;C++){H[C](E,B,F,G)}},isObservable:function(B,A){var C=B.__lookupSetter__(A);if(C&&C.observable){return true}if(!C||C.toString().indexOf("PropertyChange.dispatch")==-1){return false}else{C.observable=true;return true}},makeObservable:function(C,B){var A=C.__lookupGetter__(B);var E=C.__lookupSetter__(B);if(A&&E){C.__defineSetter__(B,function(G){var F=A.call(C);if(F==G){return }E.call(this,G);G=A.call(C);PropertyChange.dispatch(C,B,F,G)})}else{var D=C[B];C.__defineGetter__(B,function(){return D});C.__defineSetter__(B,function(G){var F=D;if(F==G){return }D=G;PropertyChange.dispatch(C,B,F,G)});C.__lookupSetter__(B).observable=true}}};var Bind={property:function(C,F,D,A,B){var E=new Binding(C,F,D,A,B);var G=C.__bindings__;if(!G){C.__bindings__=G=[]}G.push(E);var G=D.__bindings__;if(!G){D.__bindings__=G=[]}G.push(E)},setter:function(A,C,E){var B=new Binding(A,C,E);var D=A.__bindings__;if(!D){A.__bindings__=D=[]}D.push(B)},removeProperty:function(A,B,J,G,E){var D=A.__bindings__;var C=J.__bindings__;if(!D||!C){return }for(var H=0,F=D.length;H<F;H++){var K=D[H];if(K.matches(A,B,J,G,E)){K.release();D.splice(H,1);var I=C.indexOf(K);if(I!=-1){C.splice(I,1)}break}}},removeSetter:function(D,C,G){var F=D.__bindings__;if(!F){return }for(var B=0,A=F.length;B<A;B++){var E=F[B];if(E.matches(D,C,target,targetPath,twoWay)){E.release();F.splice(B,1);break}}},removeAll:function(D){var F=D.__bindings__;if(!F){return }for(var C=0,A=F.length;C<A;C++){var E=F[C];if(E.target.length){var D=E.target.length;var B=D.__bindings__.indexOf(E);if(B!=-1){D.__bindings__.splice(B,1)}}E.release()}F.length=0}};var Binding=new Class({init:function(C,B,D,E,A){this.onChange=this.onChange.bind(this);this.source=[];this.target=[];this.reset(C,B,D,E,A)},matches:function(C,B,D,E,A){if(typeof D=="function"&&E==null){return(this.source[0]==C&&this.sourcePath.join(".")==B&&this.setter==D)}else{return(this.source[0]==C&&this.sourcePath.join(".")==B&&this.target[0]==D&&this.targetPath.join(".")==E&&this.twoWay==A)}},release:function(){this.unbindPath("source",0);this.unbindPath("target",0);this.setter=null;this.sourcePath=null;this.targetPath=null;this.twoWay=false;this.sourceResolved=false;this.targetResolved=false;this.value=undefined},reset:function(C,B,D,E,A){this.release();this.twoWay=A;if(typeof D=="function"&&E==null){this.setter=D;this.targetPath=[]}else{this.targetPath=E.split(".")}this.sourcePath=B.split(".");this.bindPath("target",D,0);this.update("source",C,0)},bindPath:function(F,D,A){var B,C,G=this[F+"Path"],E,H=this[F];this.unbindPath(F,A);for(B=A,C=G.length;B<C;B++){if(D==null){break}H[B]=D;E=G[B];if(A<C-1||this.twoWay||F=="source"){PropertyChange.observe(D,E,this.onChange)}D=D[E]}this[F+"Resolved"]=(B==C||D!=null);return this[F+"Resolved"]?D:undefined},unbindPath:function(C,A){var D=this[C+"Path"],E=this[C],B=E.length;while(B-->A){PropertyChange.unobserve(E[B],D[B],this.onChange)}E.length=A},update:function(D,J,F){F=F||0;var A=this.value;this.value=this.bindPath(D,J,F);if(A===this.value){return }this.updating=true;if(this.setter){var H=this.source[this.source.length-1];this.setter.call(H,this.sourcePath[this.sourcePath.length-1],A,this.value,H)}var G=(D=="source"?"target":"source");var I=this[G+"Resolved"];if(I){var E=this[G+"Path"];var C=this[G][E.length-1];if(C){var B=E[E.length-1];C[B]=this.value}}this.updating=false},onChange:function(C,B,E,D){if(this.updating){return }var A,F;if((A=this.source.indexOf(D))!=-1){F=this.sourcePath[A];if(F==C){this.update("source",E,A+1);return }}if((A=this.target.indexOf(D))!=-1){F=this.targetPath[A];if(F==C){if(this.twoWay){this.update("target",E,A+1)}else{this.bindPath("target",E,A+1);if(this.sourceResolved&&this.targetResolved){D=this.target[this.targetPath.length-1];F=this.targetPath[this.targetPath.length-1];D[F]=this.value}}}}}});var Template=new Class({init:function(A){this.compiled=null;if(arguments.length){this.set.apply(this,arguments)}},placeholdersExp:/\{([^\{\}]+)\}/g,slashesExp:/\\/g,fixCarriageExp:/(\r\n|\n)/g,escapeSingleExp:/'/g,unEscapeSingleExp:/\\'/g,tagStartExp:/<\w/g,attributeExp:/([-\w]+)="([^"]*\{[^\}]*\}[^"]*)"/g,innerContentExp:/>([^<]*\{[^\}]*\}[^<]*)</g,propExp:/(^|\W)(this|data)\.([\w\.]+)(\()?/g,replace:function(m,code,index,str,data){return eval("try { "+code+" }catch(e) {}")||""},set:function(D){var E=false;var B=[];for(var C=0,A=arguments.length;C<A;C++){var F=arguments[C];if(F instanceof Array){B=B.concat(F)}else{if(typeof F==="string"){B.push(F)}else{if(typeof F==="boolean"){E=F}}}}this.html=B.join("")||"";if(E){this.compile()}return this},apply:function(B){if(this.compiled){return this.compiled(B)}var A=this.replace.bind(this,B);return this.html.replace(this.placeholdersExp,A)},compileReplace:function(A,B){return"' + (("+B.replace(this.unEscapeSingleExp,"'")+") || '') + '"},compile:function(){try{var func="function(data) { return '"+this.html.replace(this.slashesExp,"\\\\").replace(this.fixCarriageExp,"\\n").replace(this.escapeSingleExp,"\\'").replace(this.placeholdersExp,this.compileReplace)+"'; }";this.compiled=eval("("+func+")")}catch(e){throw'Error creating template "'+e+'" for template:\n'+this.html}return this},create:function(B){var A=this.apply(B);return simpli5.fragment(A).firstChild},createBound:function(data){var topElement=simpli5.fragment(this.html).firstChild;data=data||{};if(!this.html.match(this.placeholdersExp)){return topElement}var nodes=topElement.find("*");nodes.unshift(topElement);var nodeIndexes=[];while(this.tagStartExp.test(this.html)){nodeIndexes.push(this.tagStartExp.lastIndex-2)}var match,setter;while((match=this.attributeExp.exec(this.html))){var attr=match[1];var value=match[2];var element=null,index=this.attributeExp.lastIndex;for(var i=0;i<nodeIndexes.length;i++){if(index<nodeIndexes[i]){element=nodes[i-1];break}}if(!element){element=nodes[nodes.length-1]}setter=eval("(function() { element.attr('"+attr+"', '"+value.replace(this.slashesExp,"\\\\").replace(this.fixCarriageExp,"\\n").replace(this.escapeSingleExp,"\\'").replace(this.placeholdersExp,this.compileReplace)+"'); })").bind(topElement);while((match=this.placeholdersExp.exec(value))){var code=match[1];while((match=this.propExp.exec(code))){if(match[4]){continue}var obj=match[2]=="this"?topElement:data;var prop=match[3];Bind.setter(obj,prop,setter)}}setter()}while((match=this.innerContentExp.exec(this.html))){var content=match[1];var element=null,index=this.innerContentExp.lastIndex;for(var i=0;i<nodeIndexes.length;i++){if(index<nodeIndexes[i]){element=nodes[i-1];break}}if(!element){element=nodes[nodes.length-1]}setter=eval("(function() { element.html('"+content.replace(this.slashesExp,"\\\\").replace(this.fixCarriageExp,"\\n").replace(this.escapeSingleExp,"\\'").replace(this.placeholdersExp,this.compileReplace)+"'); })").bind(topElement);while((match=this.placeholdersExp.exec(content))){var code=match[1];while((match=this.propExp.exec(code))){if(match[4]){continue}var obj=match[2]=="this"?topElement:data;var prop=match[3];Bind.setter(obj,prop,setter)}}setter()}return topElement}});function Component(A){function B(D){var C=this.template.createBound(D);C.__proto__=this.__proto__;if(C.init){C.init.apply(C,arguments)}return C}return new Class(A,B)}var Button=new Component({extend:HTMLButtonElement,template:new Template("<button></button>"),init:function(){},get labelfunction(){return this.text()},set labelfunction(A){this.text(A)}});Storage.prototype.get=function(A){return JSON.parse(this.getItem(A))};Storage.prototype.set=function(A,B){this.setItem(A,JSON.stringify(B))};simpli5.extend(Storage,{get:function(B,A){if(B in sessionStorage){return JSON.parse(sessionStorage[B])}else{if(B in localStorage){return JSON.parse(localStorage[B])}else{return A||false}}},set:function(A,B){B=JSON.stringify(B);sessionStorage[A]=B;localStorage[A]=B}});