function forEach(B,A){Array.prototype.forEach.call(B,A)}function toArray(B){if(B instanceof Array){return B}var A=Array.prototype.slice.call(B);if(!A.length&&B!=null&&!("length" in B)){return[B]}return A}function extend(D,F,B){if(this!=window){D=this;F=D;B=F}for(var C in F){if(B===false&&C in D){continue}var A=F.__lookupGetter__(C),E=F.__lookupSetter__(C);if(A||E){if(A){D.__defineGetter__(C,A)}if(E){D.__defineSetter__(C,E)}}else{D[C]=F[C]}}return D}String.trim=function(A){return A.replace(String.trim.regex,"")};String.trim.regex=/^\s+|\s+$/g;function isNumeric(A){return typeof A=="number"||(typeof A=="string"&&parseFloat(A).toString()==String.trim(A))}var toFragment,fromElement;(function(){var A=document.createElement("div");toFragment=function(D){var E=document.createDocumentFragment();if(D instanceof Node){E.appendChild(D)}else{if(typeof D=="string"){A.innerHTML=D;while(A.firstChild){E.appendChild(A.firstChild)}}else{if(D instanceof Array||D instanceof NodeList){for(var C=0,B=D.length;C<B;C++){E.appendChild(D[C])}}}}return E};fromElement=function(B){A.appendChild(B.cloneNode(true));var C=A.innerHTML;A.innerHTML="";return C}})();function toElement(A){return toFragment(A).firstChild}function Class(B){if(!B.hasOwnProperty("constructor")){B.constructor=function(){}}var E=B.constructor;if(B){if(B.extend){Class.subclass.prototype=B.extend.prototype;E.prototype=new Class.subclass();delete B.extend}if(B.implement){var C=B.implement instanceof Array?B.implement:[B.implement];for(var D=0,A=C.length;D<A;D++){Class.implement(E,C[D])}delete B.implement}Class.mixin(E,B)}return E}extend(Class,{subclass:function(){},implement:function(B,A){Class.mixin(B,A.prototype)},mixin:function(B,A){extend(B.prototype,A)},makeClass:function(A,D,C){A.__proto__=D.prototype;var B=toArray(arguments);B.splice(0,3);if(!C){D.apply(A,B)}return A},insert:function(A,D){var C={};for(var B in D.prototype){if(D.prototype.hasOwnProperty(B)){C[B]=D.prototype[B]}}C.__proto__=A.__proto__;A.__proto__=C;return A}});Function.prototype.bind=function(E){var F=this,B=[];for(var C=1,A=arguments.length;C<A;C++){B.push(arguments[C])}var D=function(){var H=[];for(var I=0,G=arguments.length;I<G;I++){H.push(arguments[I])}H=H.concat(B);return F.apply(E,H)};D.toString=function(){return F.toString()};return D};Function.prototype.boundTo=function(B){if(!this.hasOwnProperty("__boundTo")){this.__boundTo={}}var A=simpli5.getId(B);return this.__boundTo[A]||(this.__boundTo[A]=this.bind(B))};Function.prototype.start=function(A){if(this.timer){return }this.timer=setInterval(this,A*1000);this();return this.timer};Function.prototype.stop=function(){clearInterval(this.timer);delete this.timer};Function.prototype.running=function(){return !!this.timer};Function.prototype.throttle=function(A){var C=this;var B=function(){if(B.throttled){B.pending=arguments;return B.throttled}B.throttled=setTimeout(function(){delete B.throttled;if(B.pending){B.apply(null,B.pending);delete B.pending}},A);return C.apply(null,arguments)};return B};var ElementArray=new Class({extend:Array,constructor:function(A){var B=[];Class.makeClass(B,ElementArray,true);if(!A){return B}else{if(A.nodeType){B.push(A)}else{if(typeof A==="string"){B.merge(document.querySelectorAll(A))}else{B.merge(A)}}}return B},concat:function(A){return Class.makeClass(Array.prototype.concat.apply(this,arguments),ElementArray,true)},filter:function(A,B){return Class.makeClass(Array.prototype.filter.call(this,A,B),ElementArray,true)},map:function(A,B){return Class.makeClass(Array.prototype.map.call(this,A,B),ElementArray,true)},slice:function(B,A){return Class.makeClass(Array.prototype.slice.call(this,B,A),ElementArray,true)},splice:function(C,B,A){return Class.makeClass(Array.prototype.splice.apply(this,arguments),ElementArray,true)},merge:function(A){if(A==null){return }A=toArray(A).filter(function(B){return !!B.tagName});this.push.apply(this,A)},filterBy:function(A){return this.filter(function(B){return B.matches(A)})},toString:function(){return"ElementArray: ["+this.join(",")+"]"}});extend(ElementArray,{map:function(B){var F=ElementArray.map,A=ElementArray.prototype,D=HTMLElement.prototype;for(var C in B){var E=B[C];if(typeof E!="function"){if(!F.hasOwnProperty(E)){continue}E=F[E]}A[C]=E(D[C])}}});extend(ElementArray.map,{some:function(A){return function(){var B=arguments;return this.some(function(C){return A.apply(C,B)})}},every:function(A){return function(){var B=arguments;return this.every(function(C){return A.apply(C,B)})}},forEach:function(A){return function(){var B=arguments;this.forEach(function(C){A.apply(C,B)});return this}},merge:function(A){return function(){var B=arguments;var C=new ElementArray();this.forEach(function(D){C.merge(A.apply(D,B))});return C}},getterSetter:function(A){return function(){var B=arguments;if(B.length==1){return this.length?A.call(this[0],B[0]):undefined}this.forEach(function(C){A.apply(C,B)});return this}},returnFirst:function(A){return function(){for(var D=0,C=this.length;D<C;D++){var B=A.apply(this[D],arguments);if(B!=null){return B}}}},callFirst:function(A){return function(){return A.apply(this[0],arguments)}}});Event.prevent=function(A){A.preventDefault()};Event.stop=function(A){A.preventDefault();A.stopPropagation()};var CustomEvent=new Class({extend:Event,constructor:function(D,C,B){var A=document.createEvent("Events");A.initEvent(D,C||false,B||false);Class.makeClass(A,this.constructor,true);return A}});var CustomMouseEvent=new Class({extend:MouseEvent,constructor:function(N,H,E,O,J,G,F,D,B,C,A,M,L,I,K){var P=document.createEvent("MouseEvents");P.initEvent(N,H||false,E||false,O,J,G,F,D,B,C,A,M,L,I,K);Class.makeClass(P,this.constructor,true);return P}});var CustomMutationEvent=new Class({extend:MutationEvent,constructor:function(E,C,B,G,D,A,F,I){var H=document.createEvent("MutationEvents");H.initMutationEvent(E,C||false,B||false,G,D,A,F,I);Class.makeClass(H,this.constructor,true);return H}});var DataEvent=new Class({extend:CustomEvent,constructor:function(B,C){var A=CustomEvent.call(this,B);A.data=C;return A}});var ChangeEvent=new Class({extend:CustomEvent,constructor:function(C,B,D){var A=CustomEvent.call(this,C);A.oldValue=B;A.newValue=D;return A}});var ArrayChangeEvent=new Class({extend:CustomEvent,constructor:function(D,E,C,B){var A=CustomEvent.call(this,"change");A.action=D;A.startIndex=E;A.endIndex=C;A.items=B;return A}});var ErrorEvent=new Class({extend:CustomEvent,constructor:function(B,C,D){var A=CustomEvent.call(this,B);A.code=C;A.msg=D;return A}});var HistoryEvent=new Class({extend:CustomEvent,constructor:function(B,D,C){var A=CustomEvent.call(this,B);A.hash=D!=null?D:window.location.hash.substring(1);A.state=C;return A}});var EventDispatcher=new Class({createClosures:function(D){if(!(D instanceof Array)){if(arguments.length==1&&typeof D=="string"&&D.indexOf(",")!=-1){D=D.split(/\s*,\s*/)}else{D=toArray(arguments)}}for(var C=0,A=D.length;C<A;C++){var B=D[C];if(B in this){this[B]=this[B].bind(this)}}},addEventListener:function(B,C){if(typeof C!="function"){throw"Listener must be a function"}if(!this.__events){this.__events={}}var A=this.__events[B];if(!A){this.__events[B]=A=[]}else{if(A.indexOf(C)!=-1){return }}A.push(C)},removeEventListener:function(C,D){if(!this.__events){return }var B=this.__events[C];if(!B){return }var A=B.indexOf(D);if(A!=-1){B.splice(A,1)}},hasEventListener:function(A){return(this.__events!=null&&A in this.__events&&this.__events[A].length>0)},on:function(D,E){var C=D.split(/\s*,\s*/);for(var B=0,A=C.length;B<A;B++){this.addEventListener(C[B],E,false)}return this},un:function(D,E){var C=D.split(/\s*,\s*/);for(var B=0,A=C.length;B<A;B++){this.removeEventListener(C[B],E,false)}return this},listen:function(A,C,D){var B=function(E){var F=E.target.parent(A);if(F){return D.call(F,E)}};if(!D.hasOwnProperty("__listen")){D.__listen={}}D.__listen[simpli5.getId(this)]=B;return this.on(C,B)},unlisten:function(A,C,D){if(!D.hasOwnProperty("__listen")){return }var B=D.__listen[simpli5.getId(this)];if(B){this.un(C,B)}return this},dispatchEvent:function(E,A){if(!this.__events){return }var D=this.__events[E.type];if(!D){return }if(A){delete this.__events[E.type]}for(var C=0,B=D.length;C<B;C++){D[C].call(this,E)}},dispatch:function(B,A){if(!this.__events||!this.__events[B]||!this.__events[B].length){return }this.dispatchEvent(new CustomEvent(B),A)}});(function(){var B=Node.prototype.addEventListener,A=Node.prototype.removeEventListener;extend(Node.prototype,{addEventListener:function(E,F,C){if(!this.__events){this.__events={}}var D=this.__events[E];if(!D){this.__events[E]=D=[]}else{if(D.indexOf(F)==-1){D.push(F)}}B.call(this,E,F,C||false)},removeEventListener:function(F,G,C){if(!this.__events){return }var E=this.__events[F];if(!E){return }var D=E.indexOf(G);if(D!=-1){E.splice(D,1)}A.call(this,F,G,C||false)},hasEventListener:EventDispatcher.prototype.hasEventListener,on:EventDispatcher.prototype.on,un:EventDispatcher.prototype.un,createClosures:EventDispatcher.prototype.createClosures})})();extend(window,{on:EventDispatcher.prototype.on,un:EventDispatcher.prototype.un});ElementArray.map({on:"forEach",un:"forEach",listen:"forEach",unlisten:"forEach"});(function(){function A(D){var F=D.relatedTarget;var B=D.target;while(F){if(F.parentNode==B){return }F=F.parentNode}B=D.target.parentNode;var C=[];while(B){C.push(B);B=B.parentNode}B=D.relatedTarget;while(B){if(C.indexOf(B)!=-1){break}B=B.parentNode}F=D.target;while(F){var E=document.createEvent("MouseEvents");E.initEvent(D.type.replace("mouse","roll"),false,D.cancelable,D.view,D.detail,D.screenX,D.screenY,D.ctrlKey,D.altKey,D.metaKey,D.button,D.relatedTarget);F.dispatchEvent(E);F=F.parentNode;if(F==B){break}}}document.addEventListener("mouseover",A,false);document.addEventListener("mouseout",A,false)})();var simpli5=(function(){var D=0;var A={};function C(){simpli5.dispatch("domready");simpli5.mold(document.body);simpli5.dispatch("molded");simpli5.checkLoading()}var B=new Class({extend:EventDispatcher,constructor:function(){this.ready=false;document.addEventListener("DOMContentLoaded",C,false)},getId:function(E){return E.__simpli5Id||(E.__simpli5Id=D++)},register:function(E,F){A[E]=F},unregister:function(E){delete A[E]},getRegistered:function(E){return A[E]},selector:function(E){return E+', [component="'+E+'"]'},mold:function(G){for(var F in A){var E=this.selector(F);try{if(G instanceof Array){G.forEach(function(I){if(!I.__isComponent&&I.matches(E)){I.makeClass(A[F])}})}else{if(G.matches(E)){G.makeClass(A[F])}}}catch(H){if(H.name=="SYNTAX_ERR"){throw"Invalid selector used to mold: "+E}else{throw H}}G.findAll(E).forEach(function(I){if(!I.__isComponent){I.makeClass(A[F])}})}return G},checkLoading:function(){if(External.loadCount==0){simpli5.dispatch("ready",true)}}});return new B()})();extend(Node.prototype,{parent:function(A){var C=this.parentNode;var B=!!A.tagName;while(C){if(B&&C==A){return C}else{if("matches" in C&&C.matches(A)){return C}}C=C.parentNode}return null}});extend(Element.prototype,{find:function(A){return this.querySelector(A)},findAll:function(A){return new ElementArray(this.querySelectorAll(A))},matches:(Element.prototype.matchesSelector||Element.prototype.webkitMatchesSelector||Element.prototype.mozMatchesSelector||function(A){return(document.findAll(A).indexOf(this)!=-1)}),getChildren:function(A){var B=new ElementArray(this.children);if(A){return B.filterBy(A)}return B},siblings:function(A){var B=new ElementArray(this.parentNode.children);B.splice(B.indexOf(this),1);if(A){return B.filterBy(A)}return B}});HTMLDocument.prototype.find=Element.prototype.find;HTMLDocument.prototype.findAll=Element.prototype.findAll;DocumentFragment.prototype.find=Element.prototype.find;DocumentFragment.prototype.findAll=Element.prototype.findAll;ElementArray.map({find:"returnFirst",findAll:"merge",matches:"every",getChildren:"merge"});(function(){var C=/\s+/,A=/([A-Z])/g,D=/^[^<]*(<(.|\s)+>)[^>]*$/,B=/z-?index|font-?weight|opacity|zoom|line-?height/i;extend(HTMLElement.prototype,{addClass:function(F){var E=this.className.split(C);if(E[0]==""){E.pop()}if(E.indexOf(F)==-1){E.push(F);this.className=E.join(" ")}return this},removeClass:function(G){var F=this.className.split(C);var E=F.indexOf(G);if(E!=-1){F.splice(E,1)}if(F.length==0){this.removeAttr("class")}else{this.className=F.join(" ")}return this},hasClass:function(E){return this.className.split(C).indexOf(E)!=-1},toggleClass:function(E){if(this.hasClass(E)){this.removeClass(E)}else{this.addClass(E)}return this},attr:function(E,G){if(typeof E=="object"){for(var F in E){this.setAttribute(F,E[F])}}else{if(G!==undefined){this.setAttribute(E,G);return this}else{return this.getAttribute(E)}}},css:function(F,H){if(typeof F=="object"){for(var G in F){this.css(G,F[G])}}else{if(H!==undefined){if(typeof H=="number"&&!B.test(F)){H+="px"}this.style[F]=H;if(this.getAttribute("style")==""){this.removeAttr("style")}}else{H=this.style[F];if(!H){F=F.replace(A,"-$1").toLowerCase();var E=window.getComputedStyle(this,null);H=E.getPropertyValue(F)}return H}}return this},removeAttr:function(E){this.removeAttribute(E);return this},html:function(F){if(F===undefined){return this.innerHTML}else{if(typeof F=="string"){this.innerHTML=F}else{var E=this;this.innerHTML="";F=toArray(F);forEach(F,function(G){E.append(G)})}}return this},text:function(E){if(E===undefined){return"textContent" in this?this.textContent:this.innerText}else{"textContent" in this?this.textContent=E:this.innerText=E}return this},val:function(J){var H,E,I;if(J===undefined){if(this.nodeName=="SELECT"&&this.type=="select-multiple"){H=this.selectedIndex,F=[],G=this.options;if(H==-1){return F}for(E=G.length;H<E;H++){I=G[H];if(I.selected){F.push(I.value)}}return F}return(this.value||"").replace(/\r/g,"")}if(typeof J==="number"){J+=""}if(typeof J=="boolean"&&(this.type=="radio"||this.type=="checkbox")){this.checked=J}else{if(J instanceof Array&&(this.type=="radio"||this.type=="checkbox")){this.checked=J.indexOf(this.value)!=-1}else{if(this.nodeName=="SELECT"){if(J){var F=J instanceof Array?J:[J],G=this.options;for(H=0,E=G.length;H<E;H++){I=G[H];if(F.indexOf(I.value)!=-1){I.selected=true}}}else{this.selectedIndex=-1}}else{this.value=J}}}return this},show:function(E,H){if(E&&this.css("-webkit-transition-property").indexOf("opacity")!=-1){var F=this,G;this.css("opacity",0).css("display","");setTimeout(function(){F.css("opacity",1)},0);this.on("webkitTransitionEnd,transitionend",G=function(){F.un("webkitTransitionEnd,transitionend",G);F.css("opacity","");if(H){H()}});return this}else{return this.css("display","")}},hide:function(E,H){if(E&&this.css("-webkit-transition-property").indexOf("opacity")!=-1){var F=this,G;this.css("opacity",0);this.on("webkitTransitionEnd,transitionend",G=function(){F.un("webkitTransitionEnd,transitionend",G);F.css("opacity","").css("display","none");if(H){H()}});return this}else{return this.css("display","none")}},visible:function(F,E,G){if(F!==undefined){return F?this.show(E,G):this.hide(E,G);return this}return this.rect().width!=0}});ElementArray.map({addClass:"forEach",removeClass:"forEach",hasClass:"some",toggleClass:"forEach",attr:"getterSetter",removeAttr:"forEach",css:"getterSetter",html:"getterSetter",text:"getterSetter",val:"getterSetter",show:"forEach",hide:"forEach",visible:"some"})})();extend(HTMLElement.prototype,{width:function(B){if(B===undefined){var C=parseInt(this.css("paddingLeft"))+parseInt(this.css("paddingRight"));var A=parseInt(this.css("borderLeftWidth"))+parseInt(this.css("borderRightWidth"));return this.offsetWidth-C-A}else{if(B==null){this.css("width","")}else{this.css("width",Math.max(B,0))}return this}},height:function(B){if(B===undefined){var C=parseInt(this.css("paddingTop"))+parseInt(this.css("paddingBottom"));var A=parseInt(this.css("borderTopWidth"))+parseInt(this.css("borderBottomWidth"));return this.offsetHeight-C-A}else{if(B==null){this.css("height","")}else{this.css("height",Math.max(B,0))}return this}},outerWidth:function(B){if(B===undefined){return this.offsetWidth}else{var C=parseInt(this.css("paddingLeft"))+parseInt(this.css("paddingRight"));var A=parseInt(this.css("borderLeftWidth"))+parseInt(this.css("borderRightWidth"));this.css("width",Math.max(B-C-A,0));return this}},outerHeight:function(B){if(B===undefined){return this.offsetHeight}else{var C=parseInt(this.css("paddingTop"))+parseInt(this.css("paddingBottom"));var A=parseInt(this.css("borderTopWidth"))+parseInt(this.css("borderBottomWidth"));this.css("height",Math.max(B-C-A,0));return this}},rect:function(E,A){var C;if(E===undefined){C=this.getBoundingClientRect();return{left:C.left,top:C.top,width:C.width,height:C.height,right:C.right,bottom:C.bottom}}else{C=this.getBoundingClientRect();var D=this.offsetLeft-C.left;var B=this.offsetTop-C.top;if("left" in E){this.css("left",E.left+=D)}if("top" in E){this.css("top",E.top+=B)}if(A&&("top" in E||"left" in E)){C=this.getBoundingClientRect();if("left" in E){this.css("left",E.left-(C.left+D-E.left))}if("top" in E){this.css("top",E.top-(C.top+B-E.top))}}if("right" in E){if("left" in E){this.css("width",E.right-E.left+D)}else{this.css("left",E.right-C.width+D)}}if("bottom" in E){if("top" in E){this.css("height",E.bottom-E.top+B)}else{this.css("top",E.bottom-C.height+B)}}if("width" in E){this.outerWidth(E.width)}if("height" in E){this.outerHeight(E.height)}return this}}});ElementArray.map({width:"getterSetter",height:"getterSetter",outerWidth:"getterSetter",outerHeight:"getterSetter",rect:"getterSetter"});extend(HTMLElement.prototype,{makeClass:function(A){if(!(this instanceof A)){Class.makeClass(this,A)}return this},call:function(A){if(A in this){this[A].apply(this,arguments)}return this},cleanWhitespace:function(){var B=this.firstChild;while(B){var A=B;B=B.nextSibling;if(A.nodeType==3){this.removeChild(A)}}return this},remove:function(){if(this.parentNode){this.parentNode.removeChild(this)}return this},replace:function(B){var A=this.before(B);this.remove();return A},after:function(B){var C=toFragment(B);var A=new ElementArray(C.childNodes);this.parentNode.insertBefore(C,this.nextSibling);return A},append:function(B){if(!B||(B.hasOwnProperty("length")&&!B.length)){return }var C=toFragment(B);var A=new ElementArray(C.childNodes);this.appendChild(C);return A},before:function(B){var C=toFragment(B);var A=new ElementArray(C.childNodes);this.parentNode.insertBefore(C,this);return A},prepend:function(B){var C=toFragment(B);var A=new ElementArray(C.childNodes);this.insertBefore(C,this.firstChild);return A}});ElementArray.map({makeClass:"forEach",call:"forEach",cleanWhitespace:"forEach",remove:"forEach",after:"merge",append:"merge",before:"merge",prepend:"merge"});var PropertyChange;var Bind;var BindableArray;(function(){PropertyChange={observe:function(C,J,H,F){var I=J.split(/\s*,\s*/);var G=C.__observers__;if(!G){C.__observers__=G={}}for(var D=0,B=I.length;D<B;D++){J=I[D];if(typeof C=="function"&&F){J="("+J+")"}if(!this.isObservable(C,J)){this.makeObservable(C,J)}var E=G[J];if(!E){G[J]=E=[]}if(E.indexOf(H)==-1){E.push(H)}}},unobserve:function(C,J,H){var I=J.split(/\s*,\s*/);var G=C.__observers__;if(!G){return }for(var D=0,B=I.length;D<B;D++){J=I[D];var E=G[J];if(!E){continue}var F=E.indexOf(H);E.splice(F,1)}},dispatch:function(G,K,B,C,D){if(!D&&B===C){return }var J=G.__observers__,H,F;if(!J){return }var I=[].concat(J[K]||[]).concat(J["*"]||[]);for(H=0,F=I.length;H<F;H++){I[H](K,B,C,G)}var E=G.constructor;K="()";while(E){J=E.__observers__;E=E.prototype.__proto__?E.prototype.__proto__.constructor:null;if(!J){continue}I=[].concat(J[K]||[]).concat(J["(*)"]||[]);for(H=0,F=I.length;H<F;H++){I[H](K,B,C,G)}}},isObservable:function(C,B){var D=C.__lookupSetter__(B);if(D&&D.observable){return true}if(!D||D.toString().indexOf("PropertyChange.dispatch")==-1){return false}else{D.observable=true;return true}},makeObservable:function(D,C){var B=D.__lookupGetter__(C);var F=D.__lookupSetter__(C);if(B&&F){D.__defineSetter__(C,function(H){var G=B.call(D);if(G==H){return }F.call(this,H);H=B.call(D);PropertyChange.dispatch(D,C,G,H)})}else{if(!B){var E=D[C];D.__defineGetter__(C,function(){return E});D.__defineSetter__(C,function(H){var G=E;if(G==H){return }E=H;PropertyChange.dispatch(D,C,G,H)});D.__lookupSetter__(C).observable=true}}}};Bind={property:function(D,G,E,B,C){var F=new A(D,G,E,B,C);var H=D.__bindings__;if(!H){D.__bindings__=H=[]}H.push(F);H=E.__bindings__;if(!H){E.__bindings__=H=[]}H.push(F)},setter:function(B,D,F){var C=new A(B,D,F);var E=B.__bindings__;if(!E){B.__bindings__=E=[]}E.push(C)},removeProperty:function(B,C,K,H,F){var E=B.__bindings__;var D=K.__bindings__;if(!E||!D){return }for(var I=0,G=E.length;I<G;I++){var L=E[I];if(L.matches(B,C,K,H,F)){L.release();E.splice(I,1);var J=D.indexOf(L);if(J!=-1){D.splice(J,1)}break}}},removeSetter:function(E,D,H){var G=E.__bindings__;if(!G){return }for(var C=0,B=G.length;C<B;C++){var F=G[C];if(F.matches(E,D,H)){F.release();G.splice(C,1);break}}},removeAll:function(G){var I=G.__bindings__,E;if(!I){return }for(var F=0,B=I.length;F<B;F++){var H=I[F];if(H.source.length){var C=H.source[0];E=C.__bindings__.indexOf(H);if(E!=-1){C.__bindings__.splice(E,1)}}if(H.target.length){var D=H.target[0];E=D.__bindings__.indexOf(H);if(E!=-1){D.__bindings__.splice(E,1)}}H.release()}I.length=0}};var A=new Class({constructor:function(D,C,E,F,B){this.onChange=this.onChange.bind(this);this.source=[];this.target=[];this.reset(D,C,E,F,B)},matches:function(D,C,E,F,B){if(typeof E=="function"&&F==null){return(this.source[0]==D&&this.sourcePath.join(".")==C&&this.setter==E)}else{return(this.source[0]==D&&this.sourcePath.join(".")==C&&this.target[0]==E&&this.targetPath.join(".")==F&&this.twoWay==B)}},release:function(){this.unbindPath("source",0);this.unbindPath("target",0);this.setter=null;this.sourcePath=null;this.targetPath=null;this.twoWay=false;this.sourceResolved=false;this.targetResolved=false;this.value=undefined},reset:function(D,C,E,F,B){this.release();this.twoWay=B;if(typeof E=="function"&&F==null){this.setter=E;this.targetPath=[]}else{this.targetPath=F.split(".")}this.sourcePath=C.split(".");this.bindPath("target",E,0);this.update("source",D,0)},bindPath:function(G,E,B){var C,D,H=this[G+"Path"],F,I=this[G];this.unbindPath(G,B);for(C=B,D=H.length;C<D;C++){if(E==null){break}I[C]=E;F=H[C];if(B<D-1||this.twoWay||G=="source"){PropertyChange.observe(E,F,this.onChange)}E=E[F]}this[G+"Resolved"]=(C==D||E!=null);return this[G+"Resolved"]?E:undefined},unbindPath:function(D,B){var E=this[D+"Path"],F=this[D],C=F.length;while(C-->B){PropertyChange.unobserve(F[C],E[C],this.onChange)}F.length=B},update:function(E,K,G){G=G||0;var B=this.value;this.value=this.bindPath(E,K,G);this.updating=true;if(this.setter){var I=this.source[this.source.length-1];this.setter.call(I,this.sourcePath[this.sourcePath.length-1],B,this.value,I)}var H=(E=="source"?"target":"source");var J=this[H+"Resolved"];if(J){var F=this[H+"Path"];var D=this[H][F.length-1];if(D){var C=F[F.length-1];D[C]=this.value}}this.updating=false},onChange:function(D,C,F,E){if(this.updating){return }var B,G;if((B=this.source.indexOf(E))!=-1){G=this.sourcePath[B];if(G==D){this.update("source",F,B+1);return }}if((B=this.target.indexOf(E))!=-1){G=this.targetPath[B];if(G==D){if(this.twoWay){this.update("target",F,B+1)}else{this.bindPath("target",F,B+1);if(this.sourceResolved&&this.targetResolved){E=this.target[this.targetPath.length-1];G=this.targetPath[this.targetPath.length-1];E[G]=this.value}}}}}});BindableArray=new Class({extend:Array,implement:EventDispatcher,push:function(){var C=toArray(arguments);var B=Array.prototype.push.apply(this,C);this.dispatchEvent(new ArrayChangeEvent("add",this.length-C.length,this.length-1,C));return B},pop:function(){var B=Array.prototype.pop.call(this);this.dispatchEvent(new ArrayChangeEvent("remove",this.length,this.length,[B]));return B},shift:function(){var B=Array.prototype.shift.call(this);this.dispatchEvent(new ArrayChangeEvent("remove",0,0,[B]));return B},unshift:function(){var C=toArray(arguments);var B=Array.prototype.unshift.apply(this,C);this.dispatchEvent(new ArrayChangeEvent("add",0,C.length,C));return B},splice:function(E,G,F){var D=toArray(arguments);var C=D.slice(2);var B=Array.prototype.splice.apply(this,D);if(B.length){this.dispatchEvent(new ArrayChangeEvent("remove",E,B.length-1,B))}if(C.length){this.dispatchEvent(new ArrayChangeEvent("add",E,C.length-1,C))}return B},sort:function(){var C=toArray(arguments);var B=Array.prototype.sort.apply(this,C);this.dispatchEvent(new ArrayChangeEvent("reset",0,this.length-1,this));return B},reverse:function(){var B=Array.prototype.reverse.call(this);this.dispatchEvent(new ArrayChangeEvent("reset",0,this.length-1,this));return B}})})();var Template=new Class({constructor:function(A){if(arguments.length){this.set.apply(this,arguments)}},placeholdersExp:/\{([^\{\}]+)\}/g,slashesExp:/\\/g,fixCarriageExp:/(\r\n|\n)/g,escapeSingleExp:/'/g,unEscapeEscapesExp:/\\('|\\)/g,tagStartExp:/<\w/g,attributeExp:/([-\w]+)="([^"]*\{[^\}]*\}[^"]*)"/g,innerContentExp:/>([^<]*\{[^\}]*\}[^<]*)</g,propExp:/(^|\W)(this|data)\.([\w\.]+)(\()?/g,replace:function(m,code,index,str,data){return eval("try { "+code+" }catch(e) {}")||""},set:function(D){delete this.apply;delete this.createBound;delete this.compiled;delete this.compiledBound;var B=[],E;for(var C=0,A=arguments.length;C<A;C++){var F=arguments[C];if(F instanceof Array){B=B.concat(F)}else{if(typeof F==="string"){B.push(F)}else{if(typeof F==="boolean"){E=F}}}}this.html=B.join("").replace(/%7B/g,"{").replace(/%7D/g,"}")||"";if(E){this.compile()}return this},apply:function(B){var A=this.replace.bind(this,B);return this.html.replace(this.placeholdersExp,A)},compileReplace:function(A,B){return"' + (("+B.replace(this.unEscapeEscapesExp,"$1")+") || '') + '"},compileReplaceArray:function(A,B){return"', (("+B.replace(this.unEscapeEscapesExp,"$1")+") || ''), '"},compile:function(){if(this.compiled){this}try{var func="(function(data) { return '"+this.html.replace(this.slashesExp,"\\\\").replace(this.fixCarriageExp,"\\n").replace(this.escapeSingleExp,"\\'").replace(this.placeholdersExp,this.compileReplace.boundTo(this))+"'; })";this.apply=eval(func);this.compiled=true}catch(e){throw'Error creating template "'+e+'" for template:\n'+this.html}return this},create:function(B){var A=this.apply(B);return toElement(A)},createMolded:function(A){return simpli5.mold(this.create(A))},createBound:function(I){var J=toElement(this.html);simpli5.mold(J);if(!this.html.match(this.placeholdersExp)){return J}var B=J.findAll("*");B.unshift(J);var D=[];while(this.tagStartExp.test(this.html)){D.push(this.tagStartExp.lastIndex-2)}var K,E;while((K=this.attributeExp.exec(this.html))){var N=K[1];var O=K[2];if(I==null){O=O.replace(/\bdata\b/g,"this.data")}var H=null,L=this.attributeExp.lastIndex;for(var G=0;G<D.length;G++){if(L<D[G]){H=B[G-1];break}}if(!H){H=B[B.length-1]}E=this.createAttributeSetter(N,O,J,H);while((K=this.placeholdersExp.exec(O))){var C=K[1];while((K=this.propExp.exec(C))){if(K[4]){continue}var F=K[2]=="this"?J:I;var A=K[3];Bind.setter(F,A,E)}}E()}while((K=this.innerContentExp.exec(this.html))){var M=K[1];var H=null,L=this.innerContentExp.lastIndex;if(I==null){M=M.replace(/\bdata\b/g,"this.data")}for(var G=0;G<D.length;G++){if(L<D[G]){H=B[G-1];break}}if(!H){H=B[B.length-1]}E=this.createContentSetter(M,J,H);while((K=this.placeholdersExp.exec(M))){var C=K[1];while((K=this.propExp.exec(C))){if(K[4]){continue}var F=K[2]=="this"?J:I;var A=K[3];if(!I){Bind.setter(F,A,E)}}}E()}return J},createAttributeSetter:function(attr,value,topElement,element){return eval("(function() { try { element.attr('"+attr+"', '"+value.replace(this.slashesExp,"\\\\").replace(this.fixCarriageExp,"\\n").replace(this.escapeSingleExp,"\\'").replace(this.placeholdersExp,this.compileReplace.boundTo(this))+"'); } catch(e) { element.attr('"+attr+"', ''); } })").bind(topElement)},createContentSetter:function(content,topElement,element){return eval("(function() { try { element.html(['"+content.replace(this.slashesExp,"\\\\").replace(this.fixCarriageExp,"\\n").replace(this.escapeSingleExp,"\\'").replace(this.placeholdersExp,this.compileReplaceArray.boundTo(this))+"']); } catch(e) { element.html(''); } })").bind(topElement)},compileBound:function(){if(this.compiledBound){return this}if(!this.html.match(this.placeholdersExp)){this.createBound=this.createMolded;return }var sections="",section,count=0,i,index,finalIndex,code,obj,prop;var nodes=toFragment(this.html).findAll("*");var nodeIndexes=[];while(this.tagStartExp.test(this.html)){nodeIndexes.push(this.tagStartExp.lastIndex-2)}var match,setter;while((match=this.attributeExp.exec(this.html))){var attr=match[1];var value=match[2];index=this.attributeExp.lastIndex;finalIndex=-1;for(var i=0;i<nodeIndexes.length;i++){if(index<nodeIndexes[i]){finalIndex=i-1;break}}if(finalIndex==-1){finalIndex=nodes.length-1}count++;section="\tvar element"+count+" = nodes["+finalIndex+"], setter"+count+" = (function() {\n		try {\n			element"+count+".attr('"+attr+"', '"+value.replace(this.slashesExp,"\\\\").replace(this.fixCarriageExp,"\\n").replace(this.escapeSingleExp,"\\'").replace(this.placeholdersExp,this.compileReplace.boundTo(this))+"');\n		} catch(e) {\n			element"+count+".attr('"+attr+"', '');\n		}\n	});\n";sections+=section.replace(/this/g,"topElement").replace(/(^|[^.])data/g,"$1host.data");while((match=this.placeholdersExp.exec(value))){code=match[1];while((match=this.propExp.exec(code))){if(match[4]){continue}obj=match[2]=="this"?"topElement":"data";prop=match[2]=="this"?match[3]:"data."+match[3];sections+="\tBind.setter("+obj+", '"+prop+"', setter"+count+");\n"}}sections+="\tsetter"+count+"();\n"}while((match=this.innerContentExp.exec(this.html))){var content=match[1];index=this.innerContentExp.lastIndex;finalIndex=-1;for(i=0;i<nodeIndexes.length;i++){if(index<nodeIndexes[i]){finalIndex=i-1;break}}if(finalIndex==-1){finalIndex=nodes.length-1}count++;section="\tvar element"+count+" = nodes["+finalIndex+"], setter"+count+" = (function() {\n		try {\n			element"+count+".html(['"+content.replace(this.slashesExp,"\\\\").replace(this.fixCarriageExp,"\\n").replace(this.escapeSingleExp,"\\'").replace(this.placeholdersExp,this.compileReplaceArray.boundTo(this))+"']);\n		} catch(e) {\n			element"+count+".html('');\n		}\n	});\n";sections+=section.replace(/this/g,"topElement").replace(/(^|[^.])data/g,"$1host.data");while((match=this.placeholdersExp.exec(content))){code=match[1];while((match=this.propExp.exec(code))){if(match[4]){continue}obj=match[2]=="this"?"topElement":"host";prop=match[2]=="this"?match[3]:"data."+match[3];sections+="\tBind.setter("+obj+", '"+prop+"', setter"+count+");\n"}}sections+="\tsetter"+count+"();\n"}var func="(function(data) {\n	var fragment = toFragment(this.html), topElement = fragment.firstChild.nodeName ? fragment.firstChild : fragment.firstChild.nextSibling, nodes = fragment.findAll('*'), host = topElement;\n	simpli5.mold(topElement);\n	if (data) {\n		host = {data: data};\n	} else {\n		data = topElement;\n	}\n"+sections+"\n	return topElement;\n})";this.createBound=eval(func);this.compiledBound=true;return this}});var Component,Configuration;(function(){function initializeEvents(obj,element){var evts=obj.events;if(!evts||navigator.userAgent.indexOf("Firefox")!=-1){return }for(var i=0,l=evts.length;i<l;i++){var evt=evts[i];if(element.hasAttribute("on"+evt)){try{var listener=eval("(function(event) {"+element.getAttribute("on"+evt)+"})")}catch(e){}if(listener){obj.on(evt,listener.boundTo(obj))}}}}function initializeAttributes(obj,element){var attrs=obj.properties;if(!attrs){return }for(var i=0,l=attrs.length;i<l;i++){var attr=attrs[i],prop=camelize(attr);if(element.hasAttribute(attr)){obj[prop]=getValue(prop,element.getAttribute(attr))}}}function camelize(str){var parts=str.split("-"),len=parts.length;if(len==1){return parts[0]}var camelized=str.charAt(0)=="-"?parts[0].charAt(0).toUpperCase()+parts[0].substring(1):parts[0];for(var i=1;i<len;i++){camelized+=parts[i].charAt(0).toUpperCase()+parts[i].substring(1)}return camelized}function getValue(prop,value){var parsed;if(value.indexOf("{")==0&&value.lastIndexOf("}")==value.length-1){var component=this;value=value.substring(1,value.length-1);Bind.setter(window,value,eval("(function() { try { component."+prop+" = "+value+"; } catch (e) {} })"))}else{if(value.indexOf(",")!=-1){parsed=value.split(/\s*,\s*/);for(var i=0,l=parsed.length;i<parsed;i++){parsed[i]=this.getValue(parsed[i])}return parsed}else{if((parsed=parseFloat(value))==value.toString()){return parsed}else{if(value=="true"||value=="false"){return(value=="true")}}}}return value}Component=new Class({extend:window.HTMLUnknownElement||HTMLElement,__isComponent:true,constructor:function(implementation){var constructor=implementation.constructor;if(implementation.template&&!implementation.template.compiledBound){implementation.template.compileBound()}var register=implementation.register;delete implementation.register;implementation.constructor=function(data){var element=this;this.data=data;var firefoxError=false;try{element.tagName}catch(e){firefoxError=true}if((firefoxError||!element.tagName)&&this.template){element=this.template.createBound();element.__proto__=this.__proto__;if(!(element instanceof HTMLElement)){throw"Components must extend HTMLElement or a subclass."}}constructor.apply(element,arguments);initializeEvents(element,element);initializeAttributes(element,element);if("init" in element){element.init()}return element};if(register){simpli5.register(register,implementation.constructor)}return new Class(implementation)}});Configuration=new Class({constructor:function(implementation){var constructor=implementation.constructor;var register=implementation.register;delete implementation.register;implementation.constructor=function(){var element=this;constructor.apply(this,arguments);initializeEvents(this,element);initializeAttributes(this,element);element.remove();if("init" in this){this.init()}};if(register){simpli5.register(register,implementation.constructor)}return new Class(implementation)}})})();var External=new Component({extend:Component,template:new Template("<external></external>"),register:"external, [external]",properties:["url","external","auto-load"],events:["loaded"],constructor:function(){this.autoLoad=true},init:function(){if(this.external){this.url=this.external}if(this.autoLoad&&this.url){this.load()}},load:function(){External.loadCount+=1;Ajax.send({method:"get",url:this.url,complete:this.onLoaded.boundTo(this),error:this.onError.boundTo(this)})},onLoaded:function(F){if(!F){return }var H=F;var A=this.replace(H);if(A.length==1){var C=A[0];for(var G=0;G<this.attributes.length;G++){var I=this.attributes[G];if(this.properties.indexOf(I.nodeName)==-1){C.setAttribute(I.nodeName,I.nodeValue)}}}var L=navigator.userAgent.toLowerCase().indexOf("firefox")==-1;var J=0;var D=A.findAll("script");for(var G=0;G<D.length;G++){var K=D[G];if(L){var B=K;K=document.createElement("script");for(var E=0;E<B.attributes.length;E++){var I=B.attributes[E];if(I.name){K.setAttribute(I.name,I.value)}}K.innerHTML=B.innerHTML;B.replace(K)}if(K.hasAttribute("src")){J++;K.onload=function(){if(--J==0){simpli5.mold(A);External.loadCount-=1;simpli5.checkLoading()}}}}if(J==0){External.loadCount-=1;simpli5.mold(A);simpli5.checkLoading()}},onError:function(){External.loadCount-=1}});External.loadCount=0;var Ajax=new Class({extend:Function,defaults:{method:"get",async:true,prefix:"",headers:{},format:function(A){return A}},constructor:function(){this.defaults=extend({},this.defaults);if(this.defaults.headers){this.defaults.headers=extend({},this.defaults.headers)}},get:function(A,B){return this.send({method:"get",url:A,data:B})},post:function(A,B){return this.send({method:"post",url:A,data:B})},put:function(A,B){return this.send({method:"put",url:A,data:B})},del:function(A){return this.send({method:"delete",url:A,data:data})},send:function(D){if(D.headers&&this.defaults.headers){extend(D.headers,this.defaults.headers,false)}extend(D,this.defaults,false);var G=new XMLHttpRequest(),C=new Response();C.xhr=G;if(D.data&&D.method.toLowerCase()=="get"){var A=[];var B=D.url.indexOf("?")==-1?"?":"&";for(var F in D.data){if(D.data.hasOwnProperty(F)){A.push(encodeURIComponent(F)+"="+encodeURIComponent(D.data[F]))}}D.url+=B+A.join("&");delete D.data}if(D.prefix&&!/\w+:\/\//.test(D.url)){D.url=D.prefix+D.url}if(D.user){G.open(D.method,D.url,D.async,D.user,D.password)}else{G.open(D.method,D.url,D.async)}if(D.headers){for(var F in D.headers){if(!D.headers.hasOwnProperty(F)){continue}if(F.toLowerCase()=="content-type"&&!D.data){continue}G.setRequestHeader(F,D.headers[F])}}if(D.progress){C.on("progress",D.progress)}if(D.complete){C.on("complete",D.complete)}if(D.error){C.on("error",D.error)}var H=0,E;G.onprogress=function(I){try{E=D.format(G.responseText.substring(H),G);H=G.responseText.length}catch(I){}C.trigger("progress",E)};G.onerror=function(I){C.trigger("error",G)};G.onload=function(I){try{E=D.format(G.responseText,G)}catch(I){alert(I)}C.trigger("complete",E)};if(D.data){G.send(D.data)}else{G.send()}return C},jsonFormat:function(A){if(A==""||A==null){return null}else{return JSON.parse(A)}}});Class.makeClass(Ajax,Ajax,true);var AjaxService=new Component({extend:Component,register:"services service",properties:["url-prefix","user","password"],events:["progress","complete","error"],constructor:function(B){this.connection=B||Ajax;var A=this;var C=this.headers={};this.urlPrefix="";this.findAll("headers header").forEach(function(D){if(!D.hasAttribute("name")||!D.hasAttribute("value")){return }C[D.getAttribute("name")]=D.getAttribute("value")});this.calls=this.findAll("call").forEach(function(D){D.service=A;if(D.hasAttribute("name")){A[D.getAttribute("name")]=D}})},send:function(B,A){return this.connection.send({method:B,url:this.urlPrefix+A,format:this.format,headers:this.headers,user:this.user,password:this.password})},format:function(A){if(A==""||A==null){return null}else{return JSON.parse(A)}}});var AjaxCall=new Component({extend:Component,register:"services service call",properties:["method","url","auto-trigger"],events:["progress","complete","error"],constructor:function(){this.css("display","none");this.autoTrigger=false;this.url="";this.method="get"},get autoTriggerfunction(){return this._autoTrigger||false},set autoTriggerfunction(A){if(this._autoTrigger==A){return }this._autoTrigger=A;clearInterval(this._autoTriggerInterval);if(A===false){return }this.trigger();if(A===true||isNaN(A*=1000)){return }this._autoTriggerInterval=setInterval(this.trigger.boundTo(this),A)},trigger:function(E){if(E){if(!(E instanceof Array)){E=[E]}for(var C=0;C<E.length;C++){var B=this.url,D=E[C];for(var F in D){B=B.replace(":"+F,D[F])}var A=this.service.send(this.method,B).on("complete",this.complete.boundTo(this));if(E.length==1){return A}}}else{return this.service.send(this.method,this.url).on("complete",this.complete.boundTo(this))}},progress:function(A){this.dispatchEvent(new DataEvent("progress",A))},complete:function(A){this.data=A;this.dispatchEvent(new DataEvent("complete",A))},error:function(A,B){this.dispatchEvent(new ErrorEvent("error",A,B))}});var Response=new Class({constructor:function(){this.status="progress";this.handlers={complete:[],error:[],progress:[]}},on:function(B,A){if(!this.handlers.hasOwnProperty(B)){return }var C=toArray(arguments).slice(1);this.handlers[B].push(C);return this},un:function(D,C){if(!this.handlers.hasOwnProperty(D)){return }var A=this.handlers[D];for(var B=0;B<A.length;B++){if(C==A[B][0]){A.splice(B--,1)}}return this},triggerComplete:function(A){return this.trigger("complete",A)},triggerError:function(A){return this.trigger("error",A)},trigger:function(D,E){if(!this.handlers.hasOwnProperty(D)){return }this.status=D;var B=this.handlers[D];while(B.length){var F=B.shift();var C=F[0];F[0]=E;var A=C.apply(E,F);if(A!==undefined){if(A instanceof Response){A.on("complete",this.triggerComplete.boundTo(this));A.on("error",this.triggerError.boundTo(this));return }else{if(A instanceof Error&&this.status=="complete"){this.status="error";B=this.handlers.error}E=A}}}return this}});var AjaxError=new Class({extend:Error,constructor:function(B,A){this.name="AjaxError";this.message=B;this.status=A},toString:function(){return"AjaxError: "+this.status+" - "+this.message}});Storage.prototype.get=function(A){return JSON.parse(this.getItem(A))};Storage.prototype.set=function(A,B){this.setItem(A,JSON.stringify(B))};extend(Storage,{get:function(B,A){if(B in sessionStorage){return JSON.parse(sessionStorage[B])}else{if(B in localStorage){return JSON.parse(localStorage[B])}else{return A||false}}},set:function(A,B){B=JSON.stringify(B);sessionStorage[A]=B;localStorage[A]=B}});var Cookie={set:function(B,C,A){document.cookie=B+"="+encodeURI(C)+((A)?"; expires="+A.toGMTString():"")+"; path=/"},get:function(A){Cookie.open();return Cookie.cookies[A]},remove:function(A){Cookie.set(A,"",new Date(0))},open:function(){Cookie.cookies=[];var A=document.cookie.split("; ");for(var C=0;C<A.length;C++){var B=A[C].split("=");Cookie.cookies[B[0]]=decodeURI(B[1])}}};